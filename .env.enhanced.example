# Enhanced Nutrition System Configuration
# Copy to .env and configure for your environment

# ==============================================
# CORE ENHANCED AI SETTINGS
# ==============================================

# Master switch for all enhanced AI nutrition features
# Set to false to use basic nutrition system (fallback mode)
USE_ENHANCED_AI=true

# Minimum confidence score required for nutrition DNA generation (0.0-1.0)
# Lower values = more DNA profiles generated but potentially less accurate
# Higher values = fewer profiles but higher quality predictions
DNA_CONFIDENCE_THRESHOLD=0.6

# Number of days ahead to generate behavioral predictions
# More days = broader planning but potentially less accurate
# Fewer days = more accurate but less proactive planning
PREDICTION_HORIZON_DAYS=7

# ==============================================
# EXTERNAL ML SERVICE (OPTIONAL)
# ==============================================

# URL for external machine learning service for advanced analytics
# Leave empty to use built-in AI features only
ML_SERVICE_URL=http://ml-service:8000

# Timeout for ML service requests (seconds)
# Increase if ML service needs more processing time
ML_SERVICE_TIMEOUT=60

# ==============================================
# FEATURE FLAGS - INDIVIDUAL ENHANCED FEATURES
# ==============================================

# Enable predictive analytics for eating behavior patterns
# Provides proactive warnings about potential eating challenges
ENABLE_BEHAVIOR_PREDICTION=true

# Enable context-aware meal recommendations (weather, stress, social plans)
# Adapts meal suggestions based on environmental and situational factors
ENABLE_CONTEXTUAL_ANALYSIS=true

# Enable enhanced UI with nutrition insights and progress visualizations
# Shows nutrition DNA, pattern analysis, and personalization details
ENABLE_VISUALIZATION=true

# Store detailed behavioral data for improved personalization
# Collects eating patterns, preferences, and context for learning
# Set to false for privacy-conscious deployments
COLLECT_ENHANCED_DATA=true

# ==============================================
# DATABASE CONFIGURATION
# ==============================================

# Main database connection for enhanced nutrition tables
DATABASE_URL=postgresql://postgres.cadeererdjwemspkeriq:xuoO4|LSaaGX5@aws-0-eu-north-1.pooler.supabase.com:6543/postgres

# ==============================================
# PERFORMANCE TUNING
# ==============================================

# Cache TTL for nutrition DNA profiles (seconds)
# Longer cache = better performance but less responsive to changes
NUTRITION_DNA_CACHE_TTL=3600

# Cache TTL for meal recommendations (seconds)
# Shorter cache = more dynamic recommendations but higher compute load
MEAL_RECOMMENDATIONS_CACHE_TTL=1800

# Maximum concurrent DNA generation processes
# Higher values = faster bulk processing but more resource usage
MAX_DNA_GENERATION_CONCURRENCY=5

# ==============================================
# PRIVACY & SECURITY
# ==============================================

# Enable anonymization of behavioral data for analytics
# Strips personally identifiable information while preserving patterns
ANONYMIZE_BEHAVIORAL_DATA=true

# Data retention period for detailed behavioral insights (days)
# Longer retention = better long-term pattern analysis
# Shorter retention = better privacy compliance
BEHAVIORAL_DATA_RETENTION_DAYS=1095

# ==============================================
# INTEGRATION SETTINGS
# ==============================================

# Bot API configuration for onboarding integration
API_PUBLIC_URL=http://api_public:8020
INTERNAL_API_TOKEN=your_internal_api_token_here

# WebApp URL for complex questionnaire forms
WEBAPP_URL=https://your-webapp-domain.com

# ==============================================
# MONITORING & LOGGING
# ==============================================

# Enable detailed logging for enhanced nutrition features
# Useful for debugging but increases log volume
ENHANCED_NUTRITION_DEBUG_LOGGING=false

# Sentry DSN for error tracking (optional)
SENTRY_DSN=your_sentry_dsn_here

# Enable performance metrics collection
COLLECT_PERFORMANCE_METRICS=true

# ==============================================
# EXPERIMENTAL FEATURES (USE WITH CAUTION)
# ==============================================

# Enable experimental adaptive learning algorithms
# May improve personalization but could be unstable
ENABLE_EXPERIMENTAL_LEARNING=false

# Enable A/B testing for enhanced features
# Randomly assigns users to different feature sets for comparison
ENABLE_AB_TESTING=false

# Percentage of users who receive enhanced features (0-100)
# Useful for gradual rollout of new functionality
ENHANCED_FEATURES_ROLLOUT_PERCENTAGE=100

# ==============================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# ==============================================

# Override settings for different environments
# Values below only apply when NODE_ENV matches

# Development environment
# NODE_ENV=development
# USE_ENHANCED_AI=true
# DNA_CONFIDENCE_THRESHOLD=0.3  # Lower threshold for testing
# COLLECT_ENHANCED_DATA=true
# ENHANCED_NUTRITION_DEBUG_LOGGING=true

# Staging environment
# NODE_ENV=staging
# USE_ENHANCED_AI=true
# ENHANCED_FEATURES_ROLLOUT_PERCENTAGE=50  # Test with 50% of users

# Production environment
# NODE_ENV=production
# USE_ENHANCED_AI=true
# DNA_CONFIDENCE_THRESHOLD=0.7  # Higher threshold for production quality
# ENHANCED_FEATURES_ROLLOUT_PERCENTAGE=100
# ANONYMIZE_BEHAVIORAL_DATA=true