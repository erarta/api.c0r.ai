# Changelog v0.5.x

## [0.5.0] - 2025-09-30

### Major Features Added
- **Enhanced Nutrition System**: Complete AI-powered personalization framework with Nutrition DNA profiling
- **Personalized Onboarding Questionnaire**: 7-step comprehensive food preference setup for new users
- **Intelligent Food Plan Generation**: ML-powered 3-day meal plans with smart analysis and recommendations
- **Dynamic Food Analysis**: Context-aware dish naming, health scoring, and personalized suggestions
- **Enhanced Visual Formatting**: Clean, readable food plan display with optimized emoji usage

### Enhanced User Experience
- **Conversational Food Analysis**: Friendly, personalized AI analysis that talks directly to users
- **Multi-Message Food Plans**: Separated daily plans into individual messages for better readability
- **Smart Ingredient Lists**: Vertical bullet-point formatting for cleaner ingredient display
- **Compact Analysis Summary**: Streamlined nutrition analysis with conversational tone
- **Goal Translation Improvements**: Proper Russian translations for all nutrition goals

### Technical Improvements
- **Database Schema Updates**: New tables for food_plans, nutrition_onboarding, and enhanced user profiles
- **Supabase Service Integration**: Centralized database operations with fallback handling
- **Dynamic Data Retrieval**: Real user data from database instead of static test data
- **Markdown Parsing Fixes**: Proper character escaping for Telegram message display
- **Container Optimization**: Updated Docker configurations and dependency management

### AI & ML Enhancements
- **GPT-4o Integration**: Advanced food analysis with behavioral pattern recognition
- **Nutrition DNA Profiling**: 8 personality archetypes (Early Bird Planner, Stress Driven, etc.)
- **Behavioral Prediction**: Proactive recommendations based on eating patterns
- **Context-Aware Analysis**: Weather, stress, and social factor integration
- **Smart Health Scoring**: Dynamic 1-10 rating based on nutritional content and user goals

### Data & Analytics
- **14-Day Nutrition Analysis**: Comprehensive eating pattern tracking and insights
- **Habit Formation Tracking**: Breakfast frequency, portion control, and timing analysis
- **Personalized Recommendations**: Context-specific suggestions avoiding redundancy
- **Progress Monitoring**: Calorie tracking with overeating/undereating detection

### Bug Fixes
- **Fixed static dish naming**: Dynamic dish type detection (soup, pasta, salad, etc.)
- **Fixed static health ratings**: Now calculated based on actual nutritional content
- **Fixed generic recommendations**: Personalized suggestions based on actual food items
- **Fixed Telegram parsing errors**: Proper Markdown character escaping
- **Fixed missing router**: Added nutrition onboarding endpoints to API
- **Fixed Supabase connection**: Proper initialization and error handling
- **Fixed ingredient formatting**: Clean vertical lists instead of comma-separated text

### Database Migrations
- **food_plans table**: Stores generated meal plans with metadata
- **nutrition_onboarding table**: User preference data from questionnaire
- **Enhanced user_profiles**: Additional fields for nutrition goals and preferences
- **Proper indexes**: Optimized database performance for food plan queries

### Performance Optimizations
- **Reduced message length**: Compact analysis format for better mobile experience
- **Improved loading times**: Optimized API calls and data processing
- **Better error handling**: Graceful fallbacks for all database operations
- **Container efficiency**: Streamlined Docker builds and resource usage

### Removed
- **Test data dependencies**: All hardcoded test data replaced with dynamic user data
- **Excessive emoji usage**: Cleaned up formatting while keeping essential nutrition emojis
- **Verbose analysis text**: Simplified without losing important information
- **Static translations**: Replaced with dynamic goal-based text generation