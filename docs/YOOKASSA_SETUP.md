# üí≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ YooKassa –¥–ª—è c0r.ai

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–µ–π YooKassa

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ YooKassa

#### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [yookassa.ru](https://yookassa.ru/)
2. –ù–∞–∂–º–∏—Ç–µ **"–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"**
3. –í—ã–±–µ—Ä–∏—Ç–µ **"–Ø –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å"** –∏–ª–∏ **"–Ø –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
   - –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏/–ò–ü
   - –ò–ù–ù
   - –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
   - Email –∏ —Ç–µ–ª–µ—Ñ–æ–Ω

#### –®–∞–≥ 2: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
1. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email –∞–¥—Ä–µ—Å
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω —á–µ—Ä–µ–∑ SMS
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (–æ–±—ã—á–Ω–æ 1-3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è)

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π –¥–ª—è API

#### –®–∞–≥ 1: –í—Ö–æ–¥ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
1. –í–æ–π–¥–∏—Ç–µ –≤ [–ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç YooKassa](https://yookassa.ru/my/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"** ‚Üí **"API"**

#### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ YOOKASSA_SHOP_ID
1. –í —Ä–∞–∑–¥–µ–ª–µ **"API"** –Ω–∞–π–¥–∏—Ç–µ –ø–æ–ª–µ **"shopId"**
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ - —ç—Ç–æ –≤–∞—à `YOOKASSA_SHOP_ID`
   ```
   –ü—Ä–∏–º–µ—Ä: 123456
   ```

#### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ (YOOKASSA_SECRET_KEY)
1. –í —Ç–æ–º –∂–µ —Ä–∞–∑–¥–µ–ª–µ **"API"** –Ω–∞–π–¥–∏—Ç–µ **"–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á"**
2. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –∫–ª—é—á"** –∏–ª–∏ **"–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á"**
3. **–í–ê–ñ–ù–û**: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–ª—é—á —Å—Ä–∞–∑—É - –æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ - —ç—Ç–æ –≤–∞—à `YOOKASSA_SECRET_KEY`
   ```
   –ü—Ä–∏–º–µ—Ä: live_MTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTI=
   ```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook URL

#### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
1. –í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ø–µ—Ä–µ–π–¥–∏—Ç–µ **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"** ‚Üí **"–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"**
2. –í –ø–æ–ª–µ **"HTTP-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"** —É–∫–∞–∂–∏—Ç–µ:
   ```
   https://pay.c0r.ai/webhook/yookassa
   ```
3. –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
   - ‚úÖ **payment.succeeded** (—É—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞)
   - ‚úÖ **payment.canceled** (–æ—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞)
   - ‚úÖ **refund.succeeded** (—É—Å–ø–µ—à–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç)

#### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTP-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
1. –ù–∞–∂–º–∏—Ç–µ **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å"** —Ä—è–¥–æ–º —Å URL
2. YooKassa –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç–∞—Ç—É—Å **"–ê–∫—Ç–∏–≤–µ–Ω"**

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot Payments (YOOKASSA_PROVIDER_TOKEN)

#### –®–∞–≥ 1: –°–≤—è–∑—å —Å @BotFather
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/mybots`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
4. –ù–∞–∂–º–∏—Ç–µ **"Payments"**

#### –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ YooKassa –∫ –±–æ—Ç—É
1. –í—ã–±–µ—Ä–∏—Ç–µ **"YooKassa"** –∫–∞–∫ –ø–ª–∞—Ç–µ–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É
2. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à `YOOKASSA_SHOP_ID` (–ø–æ–ª—É—á–µ–Ω–Ω—ã–π –≤ —à–∞–≥–µ 2.2)
3. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à `YOOKASSA_SECRET_KEY` (–ø–æ–ª—É—á–µ–Ω–Ω—ã–π –≤ —à–∞–≥–µ 2.3)

#### –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ Provider Token
1. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è BotFather –≤—ã–¥–∞—Å—Ç **Provider Token**
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ - —ç—Ç–æ –≤–∞—à `YOOKASSA_PROVIDER_TOKEN`
   ```
   –ü—Ä–∏–º–µ—Ä: 1234567890:TEST:live_MTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTI=
   ```

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π

#### –¢–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã YooKassa:
```
–£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞:
–ù–æ–º–µ—Ä: 5555 5555 5555 4444
–°—Ä–æ–∫: 12/24
CVC: 123

–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω–∞—è –æ–ø–ª–∞—Ç–∞:
–ù–æ–º–µ—Ä: 5555 5555 5555 4477
–°—Ä–æ–∫: 12/24
CVC: 123
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞:
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start` –±–æ—Ç—É
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –µ–¥—ã (—É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫—Ä–µ–¥–∏—Ç—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å)
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ö—É–ø–∏—Ç—å –∫—Ä–µ–¥–∏—Ç—ã"
4. –ü—Ä–æ–≤–µ–¥–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs pay`

### 6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env —Ñ–∞–π–ª–∞

–î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:

```env
# YooKassa Configuration
YOOKASSA_SHOP_ID=123456
YOOKASSA_SECRET_KEY=live_MTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTI=
YOOKASSA_PROVIDER_TOKEN=1234567890:TEST:live_MTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTI=

# Payment Configuration
YOOKASSA_PRICE_RUB=50000  # 500.00 —Ä—É–±–ª–µ–π –≤ –∫–æ–ø–µ–π–∫–∞—Ö
YOOKASSA_CREDITS=50       # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–µ–¥–∏—Ç–æ–≤ –∑–∞ –ø–ª–∞—Ç–µ–∂
YOOKASSA_DESCRIPTION="50 credits for c0r.ai food analysis"
```

### 7. –ù–∞–ª–æ–≥–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### –î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ –ª–∏—Ü–∞–º–∏:
1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö YooKassa –≤–∫–ª—é—á–∏—Ç–µ **"–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ–∫–æ–≤"**
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   - **–°–∏—Å—Ç–µ–º–∞ –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è**: –£–°–ù –¥–æ—Ö–æ–¥—ã 6%
   - **–ù–î–°**: –ë–µ–∑ –ù–î–°
   - **–°–ø–æ—Å–æ–± —Ä–∞—Å—á–µ—Ç–∞**: –ü–æ–ª–Ω—ã–π —Ä–∞—Å—á–µ—Ç

#### –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ–∫–∞ –≤ –∫–æ–¥–µ:
```javascript
receipt: {
  customer: {
    email: user.email // –∏–ª–∏ phone
  },
  items: [{
    description: "–ö—Ä–µ–¥–∏—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –µ–¥—ã c0r.ai",
    quantity: "1.00",
    amount: {
      value: "500.00",
      currency: "RUB"
    },
    vat_code: 1 // –ë–µ–∑ –ù–î–°
  }]
}
```

### 8. –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

#### –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö YooKassa –ø–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –≤ **"–ë–æ–µ–≤–æ–π —Ä–µ–∂–∏–º"**
2. –ó–∞–º–µ–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏ –Ω–∞ –±–æ–µ–≤—ã–µ
3. –û–±–Ω–æ–≤–∏—Ç–µ webhook URL –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω –¥–æ–º–µ–Ω
4. –ü—Ä–æ–≤–µ–¥–∏—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π –ø–ª–∞—Ç–µ–∂ –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Å—É–º–º—É

### üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### –ó–∞—â–∏—Ç–∞ –∫–ª—é—á–µ–π:
- ‚úÖ –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ –≤ Git
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –†–æ—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏ –∫–∞–∂–¥—ã–µ 6 –º–µ—Å—è—Ü–µ–≤
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ IP-–∞–¥—Ä–µ—Å–∞ –¥–ª—è API (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook:
```python
# –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–¥–ø–∏—Å—å webhook
import hmac
import hashlib

def verify_webhook(payload, signature, secret_key):
    expected = hmac.new(
        secret_key.encode(),
        payload.encode(),
        hashlib.sha256
    ).hexdigest()
    return hmac.compare_digest(signature, expected)
```

### üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

#### –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ YooKassa**: support@yookassa.ru
2. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**: [yookassa.ru/developers](https://yookassa.ru/developers/)
3. **Telegram –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: [@YooKassaSupport](https://t.me/YooKassaSupport)

#### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è YooKassa API](https://yookassa.ru/developers/api)
- [SDK –¥–ª—è Python](https://github.com/yoomoney/yookassa-sdk-python)
- [–ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](https://yookassa.ru/developers/solutions)

---

**–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∫–ª—é—á–µ–π –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞!** üí≥ 