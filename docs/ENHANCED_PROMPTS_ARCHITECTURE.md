# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É–ª—É—á—à–µ–Ω–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –µ–¥—ã –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤

## –û–±–∑–æ—Ä

–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—É—é –∞–¥–∞–ø—Ç–∞—Ü–∏—é, –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é 3 —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–µ—Å–∞ –ø–æ—Ä—Ü–∏–π.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–º–ø—Ç–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

```
services/ml/core/prompts/
‚îú‚îÄ‚îÄ base/                    # –ë–∞–∑–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ templates.py         # –û—Å–Ω–æ–≤–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ validators.py        # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤
‚îú‚îÄ‚îÄ food_analysis/           # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –µ–¥—ã
‚îÇ   ‚îú‚îÄ‚îÄ enhanced_analysis.py # –£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ regional_adaptation.py # –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ nutrition_benefits.py # –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤
‚îú‚îÄ‚îÄ recipe_generation/       # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–µ—Ü–µ–ø—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ triple_recipe_generator.py # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 3 —Ä–µ—Ü–µ–ø—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ recipe_ranker.py     # –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ regional_recipes.py  # –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã
‚îú‚îÄ‚îÄ motivation/              # –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ praise_system.py     # –°–∏—Å—Ç–µ–º–∞ –ø–æ—Ö–≤–∞–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ encouragement.py     # –ü–æ–æ—â—Ä–µ–Ω–∏—è
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ prompt_builder.py    # –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤
    ‚îî‚îÄ‚îÄ context_manager.py   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
```

## –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤

### PromptTemplate

```python
@dataclass
class PromptTemplate:
    """–ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω –ø—Ä–æ–º–ø—Ç–∞"""
    name: str
    language: str
    region: str
    template: str
    variables: Dict[str, Any]
    validation_rules: List[str]
    expected_output_format: str
```

### PromptBuilder

```python
class PromptBuilder:
    """–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏"""
    
    def __init__(self):
        self.regional_data = RegionalDataManager()
        self.motivation_system = MotivationSystem()
        self.nutrition_explainer = NutritionBenefitsExplainer()
    
    def build_food_analysis_prompt(self, 
                                 user_language: str,
                                 regional_context: RegionalContext,
                                 user_profile: dict,
                                 motivation_level: str = "standard") -> str:
        """–°–æ–∑–¥–∞–µ—Ç —É–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –µ–¥—ã"""
        
    def build_recipe_generation_prompt(self,
                                     user_language: str,
                                     regional_context: RegionalContext,
                                     user_profile: dict,
                                     recipe_count: int = 3) -> str:
        """–°–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤"""
```

## –£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –µ–¥—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–∞ —Å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π

```python
ENHANCED_FOOD_ANALYSIS_TEMPLATE = """
{motivation_greeting}

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –µ–¥—ã –∫–∞–∫ —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–∏—Ç–∞–Ω–∏—é, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ {regional_cuisine} –∫—É—Ö–Ω–µ.

–†–ï–ì–ò–û–ù–ê–õ–¨–ù–´–ô –ö–û–ù–¢–ï–ö–°–¢:
- –†–µ–≥–∏–æ–Ω: {region_name}
- –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã: {common_regional_products}
- –°–µ–∑–æ–Ω–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: {seasonal_context}
- –ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è: {measurement_units}

–ó–ê–î–ê–ß–ê –ê–ù–ê–õ–ò–ó–ê:
1. –û–ø—Ä–µ–¥–µ–ª–∏ –≤—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏, —É–¥–µ–ª—è—è –æ—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ {regional_products_emphasis}
2. –û—Ü–µ–Ω–∏ –≤–µ—Å –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ —Å —É—á–µ—Ç–æ–º {portion_size_context}
3. –†–∞—Å—Å—á–∏—Ç–∞–π —Ç–æ—á–Ω—É—é –ø–∏—â–µ–≤—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å
4. –û–±—ä—è—Å–Ω–∏ –ø–æ–ª—å–∑—É –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è
5. –î–æ–±–∞–≤—å –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è

–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê (—Å—Ç—Ä–æ–≥–æ JSON):
{{
    "motivation_message": "{{–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞ –≤–µ–¥–µ–Ω–∏–µ —É—á–µ—Ç–∞ –ø–∏—Ç–∞–Ω–∏—è}}",
    "food_items": [
        {{
            "name": "{{—Ç–æ—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –Ω–∞ {language}}}",
            "regional_name": "{{–º–µ—Å—Ç–Ω–æ–µ/—Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è}}",
            "weight_grams": {{—Ç–æ—á–Ω—ã–π –≤–µ—Å –≤ –≥—Ä–∞–º–º–∞—Ö}},
            "weight_confidence": {{—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –æ—Ü–µ–Ω–∫–µ –≤–µ—Å–∞ 0-1}},
            "calories": {{–∫–∞–ª–æ—Ä–∏–∏}},
            "proteins": {{–±–µ–ª–∫–∏ –≤ –≥—Ä–∞–º–º–∞—Ö}},
            "fats": {{–∂–∏—Ä—ã –≤ –≥—Ä–∞–º–º–∞—Ö}},
            "carbohydrates": {{—É–≥–ª–µ–≤–æ–¥—ã –≤ –≥—Ä–∞–º–º–∞—Ö}},
            "health_benefits": "{{–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑—ã —ç—Ç–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞}}",
            "regional_significance": "{{–∑–Ω–∞—á–µ–Ω–∏–µ –≤ –º–µ—Å—Ç–Ω–æ–π –∫—É—Ö–Ω–µ}}"
        }}
    ],
    "total_nutrition": {{
        "calories": {{–æ–±—â–∏–µ –∫–∞–ª–æ—Ä–∏–∏}},
        "proteins": {{–æ–±—â–∏–µ –±–µ–ª–∫–∏}},
        "fats": {{–æ–±—â–∏–µ –∂–∏—Ä—ã}},
        "carbohydrates": {{–æ–±—â–∏–µ —É–≥–ª–µ–≤–æ–¥—ã}},
        "estimated_plate_weight": {{–æ—Ü–µ–Ω–∫–∞ –≤–µ—Å–∞ –≤—Å–µ–π —Ç–∞—Ä–µ–ª–∫–∏ –≤ –≥—Ä–∞–º–º–∞—Ö}}
    }},
    "nutritional_analysis": {{
        "overall_healthiness": "{{–æ—Ü–µ–Ω–∫–∞ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏ –±–ª—é–¥–∞}}",
        "dietary_recommendations": "{{—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–∏—Ç–∞–Ω–∏—é}}",
        "regional_nutrition_notes": "{{–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ–π –∫—É—Ö–Ω–∏}}"
    }},
    "encouragement": "{{–º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –∑–¥–æ—Ä–æ–≤–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è}}"
}}

{detailed_analysis_instructions}

{motivation_footer}
"""
```

### –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

```python
class MotivationSystem:
    """–°–∏—Å—Ç–µ–º–∞ –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –∏ –ø–æ–æ—â—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"""
    
    MOTIVATION_LEVELS = {
        "beginner": "–Ω–æ–≤–∏—á–æ–∫ –≤ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏ –ø–∏—Ç–∞–Ω–∏—è",
        "regular": "—Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø–∏—Ç–∞–Ω–∏–µ", 
        "advanced": "–æ–ø—ã—Ç–Ω—ã–π –≤ –≤–æ–ø—Ä–æ—Å–∞—Ö –ø–∏—Ç–∞–Ω–∏—è"
    }
    
    def get_motivation_greeting(self, 
                              user_language: str,
                              user_level: str,
                              analysis_count: int) -> str:
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ"""
        
    def get_encouragement_message(self,
                                user_language: str,
                                nutritional_quality: str) -> str:
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–æ—â—Ä–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"""
```

### –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤

```python
REGIONAL_ANALYSIS_ADAPTATIONS = {
    "RU": {
        "greeting": "–ü—Ä–∏–≤–µ—Ç! –û—Ç–ª–∏—á–Ω–æ, —á—Ç–æ —Ç—ã —Å–ª–µ–¥–∏—à—å –∑–∞ —Å–≤–æ–∏–º –ø–∏—Ç–∞–Ω–∏–µ–º! üåü",
        "product_emphasis": "—Ä—É—Å—Å–∫–∏–µ –∏ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã (–≥—Ä–µ—á–∫–∞, —Ç–≤–æ—Ä–æ–≥, —Ä—è–∂–µ–Ω–∫–∞, –∫–≤–∞—à–µ–Ω–∞—è –∫–∞–ø—É—Å—Ç–∞)",
        "portion_context": "—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ –ø–æ—Ä—Ü–∏–∏ –∏ –ø–æ—Å—É–¥–∞",
        "measurement_focus": "–≥—Ä–∞–º–º—ã –∏ –º–∏–ª–ª–∏–ª–∏—Ç—Ä—ã",
        "cultural_notes": "—É—á–∏—Ç—ã–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä—É—Å—Å–∫–æ–π –∫—É—Ö–Ω–∏ –∏ –ø–∏—â–µ–≤—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫",
        "seasonal_awareness": "—Å —É—á–µ—Ç–æ–º —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –†–æ—Å—Å–∏–∏",
        "encouragement": "–¢—ã –¥–µ–ª–∞–µ—à—å –≤–∞–∂–Ω—ã–π —à–∞–≥ –∫ –∑–¥–æ—Ä–æ–≤–æ–º—É –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏! –ö–∞–∂–¥—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç —Ç–µ–±—è –∫ —Ü–µ–ª–∏! üí™"
    },
    "US": {
        "greeting": "Great job tracking your nutrition! üåü",
        "product_emphasis": "American and international foods",
        "portion_context": "standard US portion sizes and dishware",
        "measurement_focus": "grams with imperial equivalents",
        "cultural_notes": "considering American dietary patterns",
        "seasonal_awareness": "accounting for seasonal availability in the US",
        "encouragement": "You're making excellent progress on your health journey! Keep it up! üí™"
    }
}
```

## –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ 3 —Ä–µ—Ü–µ–ø—Ç–æ–≤

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç—Ä–æ–π–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

```python
class TripleRecipeGenerator:
    """–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç—Ä–µ—Ö —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤"""
    
    async def generate_three_ranked_recipes(self,
                                          image_url: str,
                                          user_context: dict,
                                          regional_context: RegionalContext) -> List[RankedRecipe]:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 3 —Ä–µ—Ü–µ–ø—Ç–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–¥—Ö–æ–¥–∞–º–∏:
        1. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        2. –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π
        3. –ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π/—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
        """
```

### –ü—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ 3 —Ä–µ—Ü–µ–ø—Ç–æ–≤

```python
TRIPLE_RECIPE_GENERATION_TEMPLATE = """
{motivation_greeting}

–¢—ã - —à–µ—Ñ-–ø–æ–≤–∞—Ä –∏ —ç–∫—Å–ø–µ—Ä—Ç –ø–æ {regional_cuisine} –∫—É—Ö–Ω–µ. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —Å–æ–∑–¥–∞–π –¢–†–ò —Ä–∞–∑–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–∞.

–ö–û–ù–¢–ï–ö–°–¢ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:
- –†–µ–≥–∏–æ–Ω: {region}
- –î–∏–µ—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è: {dietary_preferences}
- –ê–ª–ª–µ—Ä–≥–∏–∏: {allergies}
- –¶–µ–ª—å: {fitness_goal}
- –£—Ä–æ–≤–µ–Ω—å –≥–æ—Ç–æ–≤–∫–∏: {cooking_skill}
- –î–æ—Å—Ç—É–ø–Ω–æ–µ –≤—Ä–µ–º—è: {available_time}

–¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –†–ï–¶–ï–ü–¢–ê–ú:
1. –ü–ï–†–°–û–ù–ê–õ–¨–ù–´–ô –†–ï–¶–ï–ü–¢ - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø—Ä–æ—Ñ–∏–ª—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –¢–†–ê–î–ò–¶–ò–û–ù–ù–´–ô –†–ï–¶–ï–ü–¢ - –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π {regional_cuisine} —Ä–µ—Ü–µ–ø—Ç
3. –ö–†–ï–ê–¢–ò–í–ù–´–ô –†–ï–¶–ï–ü–¢ - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∏–ª–∏ —Ñ—å—é–∂–Ω

–ö–∞–∂–¥—ã–π —Ä–µ—Ü–µ–ø—Ç –¥–æ–ª–∂–µ–Ω:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã —Å —Ñ–æ—Ç–æ
- –ë—ã—Ç—å –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ–¥ {region}
- –£—á–∏—Ç—ã–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ü–µ–ª–∏ {fitness_goal}

–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê (—Å—Ç—Ä–æ–≥–æ JSON):
{{
    "motivation_message": "{{–ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞ –∂–µ–ª–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–∏—Ç—å –∑–¥–æ—Ä–æ–≤—É—é –µ–¥—É}}",
    "recipes": [
        {{
            "rank": 1,
            "type": "personal",
            "suitability_score": {{0-100}},
            "name": "{{–Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞}}",
            "description": "{{–ø–æ—á–µ–º—É —ç—Ç–æ—Ç —Ä–µ—Ü–µ–ø—Ç –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è}}",
            "prep_time": "{{–≤—Ä–µ–º—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏}}",
            "cook_time": "{{–≤—Ä–µ–º—è –≥–æ—Ç–æ–≤–∫–∏}}",
            "difficulty": "{{easy/medium/hard}}",
            "servings": {{–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ü–∏–π}},
            "ingredients": [
                {{
                    "item": "{{–∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç}}",
                    "amount": "{{–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ}}",
                    "regional_availability": "{{–ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏/—Å–µ–∑–æ–Ω–Ω—ã–π/—Ä–µ–¥–∫–∏–π}}"
                }}
            ],
            "instructions": [
                "{{–ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è}}"
            ],
            "nutrition_per_serving": {{
                "calories": {{–∫–∞–ª–æ—Ä–∏–∏}},
                "protein": {{–±–µ–ª–∫–∏}},
                "carbs": {{—É–≥–ª–µ–≤–æ–¥—ã}},
                "fat": {{–∂–∏—Ä—ã}}
            }},
            "health_benefits": "{{–ø–æ–ª—å–∑–∞ –±–ª—é–¥–∞ –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è}}",
            "regional_notes": "{{–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –≤ {region}}}",
            "personalization_notes": "{{–ø–æ—á–µ–º—É –ø–æ–¥—Ö–æ–¥–∏—Ç –∏–º–µ–Ω–Ω–æ —ç—Ç–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é}}"
        }},
        {{
            "rank": 2,
            "type": "traditional",
            "suitability_score": {{0-100}},
            // ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞
        }},
        {{
            "rank": 3,
            "type": "creative",
            "suitability_score": {{0-100}},
            // ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞
        }}
    ],
    "ingredient_analysis": {{
        "recognized_ingredients": [{{—Å–ø–∏—Å–æ–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤}}],
        "suggested_additions": [{{–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤}}],
        "regional_substitutes": {{{{–º–∞–ø–ø–∏–Ω–≥ –∑–∞–º–µ–Ω –¥–ª—è —Ä–µ–≥–∏–æ–Ω–∞}}}}
    }},
    "cooking_tips": [
        "{{—Å–æ–≤–µ—Ç—ã –ø–æ –≥–æ—Ç–æ–≤–∫–µ –¥–ª—è {region}}}"
    ],
    "encouragement": "{{–º–æ—Ç–∏–≤–∞—Ü–∏—è –∫ –∑–¥–æ—Ä–æ–≤–æ–º—É –ø–∏—Ç–∞–Ω–∏—é –∏ –≥–æ—Ç–æ–≤–∫–µ}}"
}}

{detailed_recipe_instructions}

{motivation_footer}
"""
```

### –°–∏—Å—Ç–µ–º–∞ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤

```python
class RecipeRanker:
    """–°–∏—Å—Ç–µ–º–∞ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é"""
    
    def calculate_suitability_score(self,
                                  recipe: dict,
                                  user_profile: dict,
                                  regional_context: RegionalContext) -> float:
        """
        –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ—Ü–µ–Ω–∫—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–µ—Ü–µ–ø—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        
        –§–∞–∫—Ç–æ—Ä—ã –æ—Ü–µ–Ω–∫–∏:
        - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∏–µ—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º (30%)
        - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–ª–ª–µ—Ä–≥–µ–Ω–æ–≤ (25%)
        - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–∏—Ç–Ω–µ—Å-—Ü–µ–ª—è–º (20%)
        - –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –≤ —Ä–µ–≥–∏–æ–Ω–µ (15%)
        - –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è (10%)
        """
        
    def rank_recipes(self, recipes: List[dict], user_profile: dict) -> List[RankedRecipe]:
        """–†–∞–Ω–∂–∏—Ä—É–µ—Ç —Ä–µ—Ü–µ–ø—Ç—ã –ø–æ —É–±—ã–≤–∞–Ω–∏—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è"""
```

## –°–∏—Å—Ç–µ–º–∞ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤

### NutritionBenefitsExplainer

```python
class NutritionBenefitsExplainer:
    """–°–∏—Å—Ç–µ–º–∞ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è"""
    
    def __init__(self):
        self.nutrition_database = NutritionDatabase()
        self.regional_benefits = RegionalNutritionBenefits()
    
    def explain_food_benefits(self,
                            food_item: str,
                            user_language: str,
                            regional_context: RegionalContext) -> str:
        """
        –û–±—ä—è—Å–Ω—è–µ—Ç –ø–æ–ª—å–∑—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞
        
        –í–∫–ª—é—á–∞–µ—Ç:
        - –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞
        - –í–ª–∏—è–Ω–∏–µ –Ω–∞ –∑–¥–æ—Ä–æ–≤—å–µ
        - –†–æ–ª—å –≤ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ–π –¥–∏–µ—Ç–µ
        - –°–µ–∑–æ–Ω–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
        """
        
    def generate_overall_meal_benefits(self,
                                     food_items: List[dict],
                                     user_language: str) -> str:
        """–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±—â—É—é –ø–æ–ª—å–∑—É –≤—Å–µ–≥–æ –±–ª—é–¥–∞"""
```

### –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –æ –ø–æ–ª—å–∑–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

```python
NUTRITION_BENEFITS_DATABASE = {
    "–≥—Ä–µ—á–∫–∞": {
        "ru": {
            "main_benefits": "–ë–æ–≥–∞—Ç–∞ –±–µ–ª–∫–æ–º, –∂–µ–ª–µ–∑–æ–º –∏ –º–∞–≥–Ω–∏–µ–º",
            "health_impact": "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç—É—é —Å–∏—Å—Ç–µ–º—É, –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç —É—Ä–æ–≤–µ–Ω—å —Å–∞—Ö–∞—Ä–∞",
            "regional_significance": "–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π —Ä—É—Å—Å–∫–∏–π —Å—É–ø–µ—Ä—Ñ—É–¥, –æ—Å–Ω–æ–≤–∞ –∑–¥–æ—Ä–æ–≤–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è",
            "seasonal_notes": "–û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–∞ –∑–∏–º–æ–π –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —ç–Ω–µ—Ä–≥–∏–∏"
        },
        "en": {
            "main_benefits": "Rich in protein, iron, and magnesium",
            "health_impact": "Supports cardiovascular health, regulates blood sugar",
            "regional_significance": "Traditional Russian superfood, foundation of healthy eating",
            "seasonal_notes": "Especially beneficial in winter for energy maintenance"
        }
    }
    // ... –±–∞–∑–∞ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
}
```

## –¢–æ—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –≤–µ—Å–∞ —Ç–∞—Ä–µ–ª–∫–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º –æ—Ü–µ–Ω–∫–∏ –≤–µ—Å–∞

```python
class PlateWeightEstimator:
    """–°–∏—Å—Ç–µ–º–∞ —Ç–æ—á–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –≤–µ—Å–∞ –ø–æ—Ä—Ü–∏–π"""
    
    def __init__(self):
        self.portion_standards = PortionStandards()
        self.visual_analysis = VisualPortionAnalyzer()
    
    def estimate_portion_weights(self,
                               food_items: List[str],
                               visual_cues: dict,
                               regional_context: RegionalContext) -> Dict[str, float]:
        """
        –û—Ü–µ–Ω–∏–≤–∞–µ—Ç –≤–µ—Å –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ:
        - –í–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Ä–∞–∑–º–µ—Ä–æ–≤
        - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø–æ—Ä—Ü–∏–π –¥–ª—è —Ä–µ–≥–∏–æ–Ω–∞
        - –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–∞ —Ç–∞—Ä–µ–ª–∫–µ
        - –¢–∏–ø–∞ –ø–æ—Å—É–¥—ã (–µ—Å–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è)
        """
```

### –ü—Ä–æ–º–ø—Ç –¥–ª—è —Ç–æ—á–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –≤–µ—Å–∞

```python
WEIGHT_ESTIMATION_INSTRUCTIONS = """
–¢–û–ß–ù–ê–Ø –û–¶–ï–ù–ö–ê –í–ï–°–ê –ü–û–†–¶–ò–ô:

1. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ä–∞–∑–º–µ—Ä —Ç–∞—Ä–µ–ª–∫–∏/–ø–æ—Å—É–¥—ã –∫–∞–∫ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å
2. –°—Ä–∞–≤–Ω–∏–≤–∞–π –ø—Ä–æ–¥—É–∫—Ç—ã –º–µ–∂–¥—É —Å–æ–±–æ–π –ø–æ –æ–±—ä–µ–º—É
3. –ò—Å–ø–æ–ª—å–∑—É–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ—Ä—Ü–∏–∏ –¥–ª—è {region}:
   {regional_portion_standards}

4. –£—á–∏—Ç—ã–≤–∞–π –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –ø—Ä–æ–¥—É–∫—Ç–æ–≤:
   - –ñ–∏–¥–∫–æ—Å—Ç–∏: –æ–±—ä–µ–º = –≤–µ—Å
   - –ö—Ä—É–ø—ã: –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ ~0.8
   - –û–≤–æ—â–∏: –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ ~0.9
   - –ú—è—Å–æ: –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ ~1.0

5. –û—Ü–µ–Ω–∏–≤–∞–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –∫–∞–∂–¥–æ–π –æ—Ü–µ–Ω–∫–µ (0-1)
6. –ï—Å–ª–∏ –≤–∏–¥–Ω–∞ —Ä—É–∫–∞/—Å—Ç–æ–ª–æ–≤—ã–µ –ø—Ä–∏–±–æ—Ä—ã - –∏—Å–ø–æ–ª—å–∑—É–π –∫–∞–∫ –º–∞—Å—à—Ç–∞–±

–°–¢–ê–ù–î–ê–†–¢–ù–´–ï –ü–û–†–¶–ò–ò –î–õ–Ø {region}:
{portion_size_guide}
"""
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π

```python
PROMPT_CONFIGS = {
    "gpt-4o": {
        "max_context_length": 128000,
        "optimal_prompt_length": 4000,
        "supports_detailed_instructions": True,
        "json_reliability": 0.95,
        "creativity_level": "high"
    },
    "gpt-4o-mini": {
        "max_context_length": 128000,
        "optimal_prompt_length": 2000,
        "supports_detailed_instructions": True,
        "json_reliability": 0.90,
        "creativity_level": "medium"
    }
}
```

### –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –ø–æ–¥ –º–æ–¥–µ–ª—å

```python
class ModelPromptAdapter:
    """–ê–¥–∞–ø—Ç–µ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏"""
    
    def adapt_prompt_for_model(self,
                             base_prompt: str,
                             model_name: str,
                             task_type: str) -> str:
        """
        –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –ø–æ–¥ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏
        - –°–æ–∫—Ä–∞—â–∞–µ—Ç –¥–ª—è –º–æ–¥–µ–ª–µ–π —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏
        - –î–æ–±–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
        - –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–∞
        """
```

## –°–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤

### PromptValidator

```python
class PromptValidator:
    """–í–∞–ª–∏–¥–∞—Ç–æ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤ –∏ –∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤"""
    
    def validate_prompt_structure(self, prompt: str) -> ValidationResult:
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–º–ø—Ç–∞"""
        
    def validate_expected_output(self, 
                               response: str,
                               expected_format: str) -> ValidationResult:
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç–≤–µ—Ç–∞ –æ–∂–∏–¥–∞–µ–º–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É"""
        
    def suggest_prompt_improvements(self, 
                                  prompt: str,
                                  model_name: str) -> List[str]:
        """–ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞"""
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–º–ø—Ç–æ–≤

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

```python
PROMPT_QUALITY_METRICS = {
    "json_parse_success_rate": "–ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON",
    "field_completeness": "–ø–æ–ª–Ω–æ—Ç–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª–µ–π",
    "regional_accuracy": "—Ç–æ—á–Ω–æ—Å—Ç—å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏",
    "motivation_effectiveness": "—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤",
    "weight_estimation_accuracy": "—Ç–æ—á–Ω–æ—Å—Ç—å –æ—Ü–µ–Ω–∫–∏ –≤–µ—Å–∞",
    "recipe_relevance_score": "—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å —Ä–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é"
}
```

### A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤

```python
class PromptABTester:
    """–°–∏—Å—Ç–µ–º–∞ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤"""
    
    async def run_prompt_comparison(self,
                                  prompt_a: str,
                                  prompt_b: str,
                                  test_images: List[str],
                                  evaluation_criteria: List[str]) -> ComparisonResult:
        """–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–≤—É—Ö –ø—Ä–æ–º–ø—Ç–æ–≤"""
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

1. **–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—É—é –∞–¥–∞–ø—Ç–∞—Ü–∏—é** - —Ç–æ—á–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –º–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
2. **–ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É** - –ø–æ–æ—â—Ä–µ–Ω–∏–µ –∑–¥–æ—Ä–æ–≤—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫
3. **–¢—Ä–æ–π–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ä–µ—Ü–µ–ø—Ç–æ–≤** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **–¢–æ—á–Ω—É—é –æ—Ü–µ–Ω–∫—É –≤–µ—Å–∞** - —É–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ–¥—Å—á–µ—Ç–∞ –∫–∞–ª–æ—Ä–∏–π
5. **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑—ã** - –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
6. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤ –∏ —è–∑—ã–∫–æ–≤

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ —Å —É—á–µ—Ç–æ–º –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ prompt engineering –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏–∑–∞ –µ–¥—ã –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤.