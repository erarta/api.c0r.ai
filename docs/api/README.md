# üåê API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è c0r.AI

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API endpoints –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

## üìã –û–±–∑–æ—Ä API

c0r.AI –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç RESTful API –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –µ–¥—ã, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π.

### –ë–∞–∑–æ–≤—ã–µ URL:
- **API Service**: `https://api.c0r.ai`
- **ML Service**: `https://ml.c0r.ai`
- **Payment Service**: `https://pay.c0r.ai`

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ API endpoints —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ç–æ–∫–µ–Ω—ã –∏–ª–∏ Supabase JWT.

### –¢–∏–ø—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
- **Internal Auth** - –î–ª—è –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- **User Auth** - –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **Service Role** - –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: **[–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è](authentication.md)**

## üìä Endpoints

### üîç –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```http
POST /v1/analyze
Content-Type: multipart/form-data

# –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –µ–¥—ã
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ö–ë–ñ–£ –∏ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–æ–¥—É–∫—Ç–æ–≤
```

### üë§ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
```http
GET /users/{user_id}
POST /users
PUT /users/{user_id}
DELETE /users/{user_id}

# CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

### üí≥ –ü–ª–∞—Ç–µ–∂–∏
```http
POST /payments/invoice
POST /payments/webhook/yookassa
GET /payments/status/{payment_id}

# –°–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
```

### üç≥ –†–µ—Ü–µ–ø—Ç—ã
```http
POST /recipes/generate
GET /recipes/{recipe_id}
GET /users/{user_id}/recipes

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞–º–∏
```

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫: **[Endpoints](endpoints.md)**

## ‚ö° Rate Limits

API –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π:

- **–ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: 10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤**: 5 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–û–±—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã**: 100 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É –Ω–∞ IP

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: **[Rate Limits](rate-limits.md)**

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```python
import requests

# –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
with open('food_photo.jpg', 'rb') as f:
    response = requests.post(
        'https://api.c0r.ai/v1/analyze',
        files={'photo': f},
        data={
            'telegram_user_id': '123456789',
            'user_language': 'ru'
        },
        headers={'Authorization': 'Bearer your_token'}
    )

result = response.json()
print(f"–ö–∞–ª–æ—Ä–∏–∏: {result['kbzhu']['calories']}")
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
```python
import requests

# –°–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã
response = requests.post(
    'https://pay.c0r.ai/invoice',
    json={
        'user_id': '123456789',
        'plan_id': 'premium',
        'amount': 299.0,
        'description': 'Premium –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –º–µ—Å—è—Ü'
    },
    headers={'Authorization': 'Bearer your_token'}
)

invoice = response.json()
print(f"–°—Å—ã–ª–∫–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã: {invoice['payment_url']}")
```

–ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤: **[Examples](examples.md)**

## üîß SDK –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

### Python SDK
```bash
pip install c0r-ai-sdk
```

```python
from c0r_ai import Client

client = Client(api_key='your_api_key')
result = client.analyze_image('path/to/image.jpg')
```

### JavaScript SDK
```bash
npm install @c0r-ai/sdk
```

```javascript
import { C0rAI } from '@c0r-ai/sdk';

const client = new C0rAI({ apiKey: 'your_api_key' });
const result = await client.analyzeImage(imageFile);
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å—Ç–∞—Ç—É—Å

### Health Checks
- **API Service**: `GET /health`
- **ML Service**: `GET /health`
- **Payment Service**: `GET /health`

### –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –º–æ–∂–Ω–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å—Ç–∞—Ç—É—Å–∞.

## üö® –ö–æ–¥—ã –æ—à–∏–±–æ–∫

### HTTP Status Codes
- `200` - –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `400` - –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `401` - –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- `403` - –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
- `404` - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `429` - –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –§–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫
```json
{
  "error": {
    "code": "INVALID_IMAGE",
    "message": "Uploaded file is not a valid image",
    "details": {
      "allowed_formats": ["jpg", "jpeg", "png", "webp"]
    }
  }
}
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ API

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å API:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [–ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](examples.md)
2. –ò–∑—É—á–∏—Ç–µ [–∫–æ–¥—ã –æ—à–∏–±–æ–∫](#-–∫–æ–¥—ã-–æ—à–∏–±–æ–∫)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [—Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤](#-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-—Å—Ç–∞—Ç—É—Å)
4. –°–æ–∑–¥–∞–π—Ç–µ Issue —Å —Ç–µ–≥–æ–º `api`

---

**API Version**: v1  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-01-26  
**–°—Ç–∞—Ç—É—Å**: –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è ‚úÖ