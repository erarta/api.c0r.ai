# üß™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø–ª–∞—Ç–µ–∂–µ–π c0r.ai

## ‚úÖ –°—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **Telegram Bot**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (@c0rAIBot)
- **YooKassa Provider Token**: ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω (381764678:TEST:130406)
- **Telegram Payments**: ‚úÖ –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- **Webhook**: ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω (https://pay.c0r.ai/webhook/yookassa)

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
cd /Users/evgeniydubskiy/Dev/erarta/c0r.ai/api.c0r.ai
source venv/bin/activate
python run_bot_test.py
```

### –®–∞–≥ 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ @c0rAIBot
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/buy`

## üí≥ –¢–µ—Å—Ç–æ–≤—ã–µ –ø–ª–∞—Ç–µ–∂–∏

### –ü–ª–∞–Ω—ã –æ–ø–ª–∞—Ç—ã:
- **Basic Plan**: 99‚ÇΩ ‚Üí 20 –∫—Ä–µ–¥–∏—Ç–æ–≤
- **Pro Plan**: 399‚ÇΩ ‚Üí 100 –∫—Ä–µ–¥–∏—Ç–æ–≤

### –¢–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã:
```
–ö–∞—Ä—Ç–∞: 4111 1111 1111 1111
–°—Ä–æ–∫: 12/25
CVV: 123
–î–µ—Ä–∂–∞—Ç–µ–ª—å: Test User
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã:
```
–£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞: 5555 5555 5555 4444
–û—Ç–∫–ª–æ–Ω–µ–Ω–∞: 4000 0000 0000 0002
3D Secure: 4000 0000 0000 3220
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ö–æ–º–∞–Ω–¥–∞ /buy
- –ë–æ—Ç –ø–æ–∫–∞–∂–µ—Ç –∫–Ω–æ–ø–∫–∏ —Å –ø–ª–∞–Ω–∞–º–∏
- –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–ª–∞–Ω (Basic –∏–ª–∏ Pro)

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–∞
- Telegram –ø–æ–∫–∞–∂–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π –∏–Ω–≤–æ–π—Å
- –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã
- –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–ª–∞—Ç–µ–∂

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
- YooKassa –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–∞—Ç–µ–∂
- Webhook —É–≤–µ–¥–æ–º–∏—Ç —Å–∏—Å—Ç–µ–º—É
- –ö—Ä–µ–¥–∏—Ç—ã –¥–æ–±–∞–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/status` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—Ä–µ–¥–∏—Ç–æ–≤
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:
```bash
# –õ–æ–≥–∏ –±–æ—Ç–∞
tail -f bot.log

# –õ–æ–≥–∏ webhook
curl https://pay.c0r.ai/webhook/yookassa -X POST \
  -H "Content-Type: application/json" \
  -d '{"type":"payment.succeeded","object":{"id":"test"}}'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–∞
python test_telegram_payments.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ YooKassa API (–ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π)
python test_payment_simple.py
```

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **YooKassa API –∫–ª—é—á–∏**: –ù—É–∂–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
2. **Webhook URL**: –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ (https://pay.c0r.ai/webhook/yookassa)
3. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç**: Webhook —Ç—Ä–µ–±—É–µ—Ç HTTPS

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ YooKassa API

–ï—Å–ª–∏ YooKassa API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –í–æ–π–¥–∏—Ç–µ –≤ https://yookassa.ru
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è" ‚Üí "–ö–ª—é—á–∏ API"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ Shop ID –∏ Secret Key
4. –û–±–Ω–æ–≤–∏—Ç–µ –≤ `.env`:
```
YOOKASSA_SHOP_ID=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_shop_id
YOOKASSA_SECRET_KEY=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_secret_key
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- Telegram Bot API
- Provider Token
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–æ–≤
- –ö–Ω–æ–ø–∫–∏ –æ–ø–ª–∞—Ç—ã
- Webhook —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:
- YooKassa API –∫–ª—é—á–∏
- Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ YooKassa –∫–ª—é—á–∏**
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø–ª–∞—Ç–µ–∂–∞**
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook –æ–±—Ä–∞–±–æ—Ç–∫—É**
4. **–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫—Ä–µ–¥–∏—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è**
5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ –ø–æ—Å–ª–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è**

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ü–ª–∞—Ç–µ–∂–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- [ ] –ö—Ä–µ–¥–∏—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è
- [ ] Webhook —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç

**–°—Ç–∞—Ç—É—Å**: üü° –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ YooKassa API) 