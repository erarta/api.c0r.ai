# Payment Service

–°–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π –∏ –±–∏–ª–ª–∏–Ω–≥–∞.

## üèóÔ∏è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üí≥ Stripe (`stripe/`)
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Stripe –¥–ª—è –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π.

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –∏–Ω—Ç–µ–Ω—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ webhook'–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- –í–æ–∑–≤—Ä–∞—Ç—ã –∏ –¥–∏—Å–ø—É—Ç—ã

### üè¶ YooKassa (`yookassa/`)
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å YooKassa –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π –≤ –†–æ—Å—Å–∏–∏ –∏ –°–ù–ì.

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –æ–ø–ª–∞—Ç—ã
- –§–∏—Å–∫–∞–ª–∏–∑–∞—Ü–∏—è —á–µ–∫–æ–≤

### üîó Shared (`shared/`)
–û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤.

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –ú–æ–¥–µ–ª–∏ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –£—Ç–∏–ª–∏—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# Payment Service
cd services/pay && python main.py

# Docker
docker-compose up payment-service
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- `STRIPE_SECRET_KEY` - –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á Stripe
- `STRIPE_WEBHOOK_SECRET` - –°–µ–∫—Ä–µ—Ç –¥–ª—è webhook'–æ–≤ Stripe
- `YOOKASSA_SHOP_ID` - ID –º–∞–≥–∞–∑–∏–Ω–∞ YooKassa
- `YOOKASSA_SECRET_KEY` - –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á YooKassa
- `PAYMENT_SERVICE_PORT` - –ü–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8003)

## üìä API Endpoints

- `POST /stripe/create-payment` - –°–æ–∑–¥–∞–Ω–∏–µ Stripe –ø–ª–∞—Ç–µ–∂–∞
- `POST /stripe/webhook` - Webhook –¥–ª—è Stripe
- `POST /yookassa/create-payment` - –°–æ–∑–¥–∞–Ω–∏–µ YooKassa –ø–ª–∞—Ç–µ–∂–∞
- `POST /yookassa/webhook` - Webhook –¥–ª—è YooKassa
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ webhook'—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å
- –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö